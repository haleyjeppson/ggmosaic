<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mosaic plots with `ggplot2` â€¢ ggmosaic</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Mosaic plots with `ggplot2`">
<meta property="og:description" content="ggmosaic">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggmosaic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ggmosaic.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/haleyjeppson/ggmosaic/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ggmosaic_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Mosaic plots with <code>ggplot2</code>
</h1>
                        <h4 class="author">Haley Jeppson and Heike Hofmann</h4>
            
            <h4 class="date">2021-02-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/haleyjeppson/ggmosaic/blob/master/vignettes/ggmosaic.Rmd"><code>vignettes/ggmosaic.Rmd</code></a></small>
      <div class="hidden name"><code>ggmosaic.Rmd</code></div>

    </div>

    
    
<p>Designed to create visualizations of categorical data, ggmosaic can produce bar charts, stacked bar charts, mosaic plots, and double decker plots. The plots are constructed hierarchically, so the ordering of the variables is very important.</p>
<div id="how-to-use-ggmosaic" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-ggmosaic" class="anchor"></a>How to use ggmosaic</h2>
<div id="ggplot2-limitations-to-consider" class="section level3">
<h3 class="hasAnchor">
<a href="#ggplot2-limitations-to-consider" class="anchor"></a>ggplot2 limitations to consider</h3>
<p>ggplot2 is not capable of handling a variable number of variables. The current solution is to read in the variables <code>x1</code> and <code>x2</code> as <code>x = product(x1, x2)</code>. The <code><a href="../reference/product.html">product()</a></code> function is a wrapper function for a list which will allow for it to pass <code>check_aesthetics()</code>.</p>
</div>
<div id="geom_mosaic-setting-the-aesthetics" class="section level3">
<h3 class="hasAnchor">
<a href="#geom_mosaic-setting-the-aesthetics" class="anchor"></a>geom_mosaic: setting the aesthetics</h3>
<p>Aesthetics that can be set:</p>
<ul>
<li><p><code>weight</code>: select a weighting variable</p></li>
<li>
<p><code>x</code>: select variables to add to formula</p>
<ul>
<li>declared as <code>x = product(x1, x2, ...)</code>
</li>
</ul>
</li>
<li>
<p><code>fill</code>: select a variable to be filled</p>
<ul>
<li>if the variable is not also called in <code>x</code>, it will be added to the formula in the first position</li>
</ul>
</li>
<li>
<p><code>conds</code> : select a variable to condition on</p>
<ul>
<li>declared as <code>conds = product(cond1, cond2, ...)</code>
</li>
</ul>
</li>
</ul>
<p>These values are then sent through <code>productplots</code> functions to create the formula for the desired distribution. The formula is constructed as: <code>weight ~ fill + x | conds</code></p>
<div id="from-the-aesthetics-to-the-formula" class="section level4">
<h4 class="hasAnchor">
<a href="#from-the-aesthetics-to-the-formula" class="anchor"></a>From the aesthetics to the formula</h4>
<p>Suppose we wish to define the following mappings: <code>aes(weight = 1, x = product(Y, X), fill = W, conds = product(Z))</code>. These aesthetics set up the formula for the distribution as <code>1 ~ W + X + Y | Z</code></p>
</div>
</div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="one-variable" class="section level3">
<h3 class="hasAnchor">
<a href="#one-variable" class="anchor"></a>One variable</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">rude_to_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">rude_to_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>title<span class="op">=</span><span class="st">'f(rude_to_recline)'</span><span class="op">)</span></code></pre></div>
<p><img src="ggmosaic_files/figure-html/formula-1b-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div id="two-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#two-variables" class="anchor"></a>Two variables</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>title<span class="op">=</span><span class="st">'f(do_you_recline | rude_to_recline) f(rude_to_recline)'</span><span class="op">)</span></code></pre></div>
<p><img src="ggmosaic_files/figure-html/formula-2b-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div id="conditioning" class="section level3">
<h3 class="hasAnchor">
<a href="#conditioning" class="anchor"></a>Conditioning</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span>, conds<span class="op">=</span><span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, divider<span class="op">=</span><span class="fu"><a href="../reference/mosaic.html">mosaic</a></span><span class="op">(</span><span class="st">"v"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title<span class="op">=</span><span class="st">'f(do_you_recline, rude_to_recline| gender)'</span><span class="op">)</span></code></pre></div>
<p><img src="ggmosaic_files/figure-html/formula-4b-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div id="alternative-to-conditioning-faceting" class="section level3">
<h3 class="hasAnchor">
<a href="#alternative-to-conditioning-faceting" class="anchor"></a>Alternative to conditioning: faceting</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title<span class="op">=</span><span class="st">'f(do_you_recline, rude_to_recline| gender)'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">facet_grid</span><span class="op">(</span><span class="va">gender</span><span class="op">~</span><span class="va">.</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span></code></pre></div>
<p><img src="ggmosaic_files/figure-html/formula-5b-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div id="the-importance-of-ordering" class="section level3">
<h3 class="hasAnchor">
<a href="#the-importance-of-ordering" class="anchor"></a>The importance of ordering</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">order1</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">order2</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">rude_to_recline</span>, <span class="va">do_you_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">order1</span> <span class="op">+</span> <span class="va">order2</span></code></pre></div>
<p><img src="ggmosaic_files/figure-html/order-b-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="other-features-of-geom_mosaic" class="section level2">
<h2 class="hasAnchor">
<a href="#other-features-of-geom_mosaic" class="anchor"></a>Other features of <code>geom_mosaic()</code>
</h2>
<p>Arguments unique to <code><a href="../reference/geom_mosaic.html">geom_mosaic()</a></code>:</p>
<ul>
<li><p><code>divider</code>: used to declare the type of partitions to be used</p></li>
<li><p><code>offset</code>: sets the space between the first spine</p></li>
</ul>
<div id="divider-function-types-of-partitioning" class="section level3">
<h3 class="hasAnchor">
<a href="#divider-function-types-of-partitioning" class="anchor"></a>Divider function: Types of partitioning</h3>
<p>Four options available for each partition:</p>
<ul>
<li><p><code>vspine</code>: <!-- (Vertical spine partition) --> width constant, height varies.</p></li>
<li><p><code>hspine</code>: <!-- Horizontal spine partition: --> height constant, width varies.</p></li>
<li><p><code>vbar</code>: <!--  Vertical bar partition: --> height constant, width varies.</p></li>
<li><p><code>hbar</code>: <!--  Horizontal bar partition: --> width constant, height varies.</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hbar</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">rude_to_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">rude_to_recline</span><span class="op">)</span>, divider<span class="op">=</span><span class="st">"hbar"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>title<span class="op">=</span><span class="st">'divider = "hbar"'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">hspine</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">rude_to_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">rude_to_recline</span><span class="op">)</span>,  divider<span class="op">=</span><span class="st">"hspine"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">" "</span>, title<span class="op">=</span><span class="st">'divider = "hspine"'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">vbar</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">rude_to_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">rude_to_recline</span><span class="op">)</span>, divider<span class="op">=</span><span class="st">"vbar"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>y<span class="op">=</span><span class="st">" "</span>, x<span class="op">=</span><span class="st">""</span>, title<span class="op">=</span><span class="st">'divider = "vbar"'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>
 
<span class="va">vspine</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">rude_to_recline</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">rude_to_recline</span><span class="op">)</span>, divider<span class="op">=</span><span class="st">"vspine"</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>y<span class="op">=</span><span class="st">" "</span>, x<span class="op">=</span><span class="st">""</span>, title<span class="op">=</span><span class="st">'divider = "vspine"'</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">hbar</span> <span class="op">+</span> <span class="va">hspine</span> <span class="op">+</span> <span class="va">vbar</span> <span class="op">+</span> <span class="va">vspine</span> <span class="op">+</span> <span class="fu">plot_layout</span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="ggmosaic_files/figure-html/partitions-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div id="partitioning-with-one-or-more-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#partitioning-with-one-or-more-variables" class="anchor"></a>Partitioning with one or more variables</h3>
<ul>
<li>
<code><a href="../reference/mosaic.html">mosaic()</a></code>
<ul>
<li>default</li>
<li>will use spines in alternating directions</li>
<li>begins with a horizontal spine</li>
</ul>
</li>
<li>
<code><a href="../reference/mosaic.html">mosaic("v")</a></code>
<ul>
<li>begins with a vertical spine and then alternates</li>
</ul>
</li>
<li>
<code><a href="../reference/ddecker.html">ddecker()</a></code>
<ul>
<li>selects n-1 horizontal spines and ends with a vertical spine</li>
</ul>
</li>
<li>Define each type of partition
<ul>
<li>e.g.Â <code><a href="https://rdrr.io/r/base/c.html">c("hspine", "vspine", "hbar")</a></code>
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">h_mosaic</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span>, <span class="va">gender</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span>, divider<span class="op">=</span><span class="fu"><a href="../reference/mosaic.html">mosaic</a></span><span class="op">(</span><span class="st">"h"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">" "</span>, title<span class="op">=</span><span class="st">'divider= mosaic()'</span><span class="op">)</span>

<span class="va">v_mosaic</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span>, <span class="va">gender</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span>, divider<span class="op">=</span><span class="fu"><a href="../reference/mosaic.html">mosaic</a></span><span class="op">(</span><span class="st">"v"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">" "</span>, title<span class="op">=</span><span class="st">'divider= mosaic("v")'</span><span class="op">)</span>

<span class="va">doubledecker</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span>, <span class="va">gender</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span>, divider<span class="op">=</span><span class="fu"><a href="../reference/ddecker.html">ddecker</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">" "</span>, title<span class="op">=</span><span class="st">'divider= ddecker()'</span><span class="op">)</span>

<span class="va">h_mosaic</span> <span class="op">+</span> <span class="va">v_mosaic</span> <span class="op">+</span> <span class="va">doubledecker</span> <span class="op">+</span> <span class="fu">plot_layout</span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="ggmosaic_files/figure-html/mosaic-a-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mosaic4</span> <span class="op">&lt;-</span>  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span>, <span class="va">gender</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span>, divider<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"vspine"</span>, <span class="st">"vspine"</span>, <span class="st">"hbar"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.y<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">" "</span>, title<span class="op">=</span><span class="st">'divider= c("vspine", "vspine", "hbar")'</span><span class="op">)</span> 

<span class="va">mosaic5</span> <span class="op">&lt;-</span>  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span>, <span class="va">gender</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span>, divider<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hbar"</span>, <span class="st">"vspine"</span>, <span class="st">"hbar"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">" "</span>, title<span class="op">=</span><span class="st">'divider= c("hbar", "vspine", "hbar")'</span><span class="op">)</span>

<span class="va">mosaic6</span> <span class="op">&lt;-</span>  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span>, <span class="va">gender</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span>, divider<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hspine"</span>, <span class="st">"hspine"</span>, <span class="st">"hspine"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.x<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">" "</span>, title<span class="op">=</span><span class="st">'divider= c("hspine", "hspine", "hspine")'</span><span class="op">)</span>

<span class="va">mosaic7</span> <span class="op">&lt;-</span>  <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">do_you_recline</span>, <span class="va">rude_to_recline</span>, <span class="va">gender</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">do_you_recline</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">T</span>, divider<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"vspine"</span>, <span class="st">"vspine"</span>, <span class="st">"vspine"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.y<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">" "</span>, title<span class="op">=</span><span class="st">'divider= c("vspine", "vspine", "vspine")'</span><span class="op">)</span>

<span class="va">mosaic4</span> <span class="op">+</span> <span class="va">mosaic5</span> <span class="op">+</span> <span class="va">mosaic6</span> <span class="op">+</span> <span class="va">mosaic7</span> <span class="op">+</span> <span class="fu">plot_layout</span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="ggmosaic_files/figure-html/mosaic-d-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div id="adjusting-the-offset" class="section level3">
<h3 class="hasAnchor">
<a href="#adjusting-the-offset" class="anchor"></a>Adjusting the offset</h3>
<p><code>offset</code>: Set the space between the first spine</p>
<ul>
<li><p>default is 0.01</p></li>
<li><p>space between partitions decreases as layers build</p></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">offset1</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">flight_freq</span>, <span class="va">region</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">flight_freq</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">"region"</span>, y<span class="op">=</span><span class="st">" "</span>,  title<span class="op">=</span><span class="st">" offset = 0.01"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/scale_x_productlist.html">scale_y_productlist</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.y<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span>,
        axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span>

<span class="va">offset0</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">flight_freq</span>, <span class="va">region</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">flight_freq</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, offset <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">"region"</span>, y<span class="op">=</span><span class="st">" "</span>,  title<span class="op">=</span><span class="st">" offset = 0"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/scale_x_productlist.html">scale_y_productlist</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.y<span class="op">=</span><span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span>,
        axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span>

<span class="va">offset2</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">fly</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_mosaic.html">geom_mosaic</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/product.html">product</a></span><span class="op">(</span><span class="va">flight_freq</span>, <span class="va">region</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">flight_freq</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span>, offset <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">"region"</span>, y<span class="op">=</span><span class="st">" "</span>,  title<span class="op">=</span><span class="st">" offset = 0.02"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/scale_x_productlist.html">scale_y_productlist</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>, legend.position<span class="op">=</span><span class="st">"none"</span>,
        axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span>

<span class="va">offset0</span> <span class="op">+</span> <span class="va">offset1</span> <span class="op">+</span> <span class="va">offset2</span> <span class="op">+</span> <span class="fu">plot_layout</span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p><img src="ggmosaic_files/figure-html/offset-b-1.png" width="960" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="current-issues" class="section level2">
<h2 class="hasAnchor">
<a href="#current-issues" class="anchor"></a>Current Issues</h2>
<ul>
<li>
<code><a href="../reference/geom_mosaic.html">geom_mosaic()</a></code> is no longer compatible with <code>ggplotly()</code>
</li>
</ul>
</div>
<div id="version-compatibility-issues-with-ggplot2" class="section level2">
<h2 class="hasAnchor">
<a href="#version-compatibility-issues-with-ggplot2" class="anchor"></a>Version compatibility issues with ggplot2</h2>
<p>Since the initial release of ggmosaic, ggplot2 has evolved considerably. And as ggplot2 continues to evolve, ggmosaic must continue to evolve alongside it. Although these changes affect the underlying code and not the general usage of ggmosaic, the general user may need to be aware of compatibility issues that can arise between versions. The table below summarizes the compatibility between versions.</p>
<table class="table">
<colgroup>
<col width="8%">
<col width="7%">
<col width="69%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th>ggmosaic</th>
<th>ggplot2</th>
<th>Axis labels</th>
<th>Tick marks</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0.3.3</td>
<td>3.3.3</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td>0.3.0</td>
<td>3.3.0</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="odd">
<td>0.2.2</td>
<td>3.3.0</td>
<td>Default labels are okay, but must use <br><code>scale_*_productlist()</code> to modify</td>
<td>No tick marks</td>
</tr>
<tr class="even">
<td>0.2.2</td>
<td>3.2.0</td>
<td>Default labels okay, but must use <br><code>scale_*_productlist()</code> to modify</td>
<td>x</td>
</tr>
<tr class="odd">
<td>0.2.0</td>
<td>3.2.0</td>
<td>Default labels are wrong, but can use <br><code>labs()</code> to modify</td>
<td>x</td>
</tr>
</tbody>
</table>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Haley Jeppson, Heike Hofmann, Di Cook.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
